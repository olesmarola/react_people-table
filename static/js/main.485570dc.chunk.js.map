{"version":3,"sources":["PersonRow.js","const.js","PeopleTable.js","api.js","PeoplePage.js","App.js","index.js"],"names":["PersonRow","_ref","selected","selectRow","headers","person","id","sex","born","age","century","react_default","a","createElement","className","cn","concat","person--selected","onClick","map","header","key","code","person__bornBefore1650","person__after65","TABLE_HEADERS","label","type","React","memo","people","handleSortClick","location","useLocation","history","useHistory","match","useRouteMatch","push","pathname","find","name","toLowerCase","replace","search","length","src_PersonRow","params","getPeopleFromServer","response","regenerator_default","async","_context","prev","next","awrap","fetch","sent","abrupt","json","stop","PeoplePage","_useState","useState","_useState2","Object","slicedToArray","setPeople","URLSearchParams","query","get","visiblePeople","toConsumableArray","useEffect","peopleFromServer","peopleFromServerWithIds","i","objectSpread2","died","Math","ceil","getPeople","searchQuery","trim","filter","mother","father","includes","getSortedPeople","listOfPeople","field","peopleCopy","defineProperty","sort","b","localeCompare","sortOrder","fieldType","reverse","setSortBy","lib","placeholder","debounceTimeout","onChange","e","set","target","value","toString","src_PeopleTable","sortingTitle","App","Fragment","react_router_dom","to","react_router","path","component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.485570dc.chunk.js","sourcesContent":["import React from 'react';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\n\nconst PersonRow = ({ selected, selectRow, headers, person }) => {\n  const { id, sex, born, age, century } = person;\n\n  return (\n    <tr\n      className={\n        cn(\n          'person',\n          `person person--lived-in-${century}`,\n          sex === 'm' ? 'person--male' : 'person--female',\n          { 'person--selected': selected }\n        )}\n      onClick={() => selectRow(id)}\n    >\n      {headers.map(header => (\n        <td\n          key={header.code}\n          className={\n            cn(\n              { person__bornBefore1650: header.code === 'name' && born < 1650 },\n              { person__after65: header.code === 'age' && age >= 65 }\n            )\n          }\n        >\n          {person[header.code]}\n        </td>\n      ))}\n    </tr>\n  );\n};\n\nPersonRow.propTypes = {\n  person: PropTypes.shape({\n    id: PropTypes.number,\n    sex: PropTypes.string,\n    born: PropTypes.number,\n    age: PropTypes.number,\n    century: PropTypes.number,\n  }).isRequired,\n  selected: PropTypes.bool.isRequired,\n  selectRow: PropTypes.func.isRequired,\n  headers: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default PersonRow;\n","export const TABLE_HEADERS = [\n  {\n    code: 'id',\n    label: 'Id',\n    type: 'number',\n  },\n  {\n    code: 'name',\n    label: 'Name',\n    type: 'string',\n  },\n  {\n    code: 'sex',\n    label: 'Sex',\n    type: 'string',\n  },\n  {\n    code: 'born',\n    label: 'Born',\n    type: 'number',\n  },\n  {\n    code: 'died',\n    label: 'Died',\n    type: 'number',\n  },\n  {\n    code: 'age',\n    label: 'Age',\n    type: 'number',\n  },\n  {\n    code: 'century',\n    label: 'Century',\n    type: 'number',\n  },\n  {\n    code: 'mother',\n    label: 'Mother',\n    type: 'string',\n  },\n  {\n    code: 'father',\n    label: 'Father',\n    type: 'string',\n  },\n];\n","import React from 'react';\nimport { useHistory, useRouteMatch, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport PersonRow from './PersonRow';\nimport { TABLE_HEADERS } from './const';\n\nconst PeopleTable = ({ people, handleSortClick }) => {\n  const location = useLocation();\n  const history = useHistory();\n  const match = useRouteMatch();\n\n  const selectRow = (id) => {\n    history.push({\n      pathname: `/people/${people\n        .find(person => id === person.id).name\n        .toLowerCase()\n        .replace(/\\s/g, '-')}`,\n      search: location.search,\n    });\n  };\n\n  return (\n    people.length > 0 && (\n      <table className=\"people__table\">\n        <thead>\n          <tr>\n            {TABLE_HEADERS.map(header => (\n              <th\n                key={header.code}\n                onClick={() => {\n                  handleSortClick(header.code);\n                }}\n              >\n                {header.label}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {people.map(\n            person => (\n              <PersonRow\n                key={person.name}\n                person={person}\n                headers={TABLE_HEADERS}\n                selected={person.name\n                  .toLowerCase()\n                  .replace(/\\s/g, '-') === match.params.person}\n                selectRow={selectRow}\n              />\n            )\n          )}\n        </tbody>\n      </table>\n    )\n  );\n};\n\nPeopleTable.propTypes = {\n  people: PropTypes.arrayOf(PropTypes.object).isRequired,\n  sortFields: PropTypes.func.isRequired,\n};\n\nexport default React.memo(PeopleTable);\n","const URL = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeopleFromServer = async() => {\n  const response = await fetch(URL);\n\n  return response.json();\n};\n","import React, { useState, useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { DebounceInput } from 'react-debounce-input';\nimport './App.scss';\nimport PeopleTable from './PeopleTable';\nimport { getPeopleFromServer } from './api';\nimport { TABLE_HEADERS } from './const';\n\nconst getPeopleWithIds = peopleList => peopleList.map(\n  (person, i) => ({\n    ...person,\n    id: i,\n    age: person.died - person.born,\n    century: Math.ceil(person.died / 100),\n  })\n);\n\nconst PeoplePage = () => {\n  const [people, setPeople] = useState([]);\n  const location = useLocation();\n  const history = useHistory();\n  const search = new URLSearchParams(location.search);\n  const query = search.get('query');\n  let visiblePeople = [...people];\n\n  const getPeople = async() => {\n    const peopleFromServer = await getPeopleFromServer();\n    const peopleFromServerWithIds = getPeopleWithIds(peopleFromServer);\n\n    setPeople(peopleFromServerWithIds);\n  };\n\n  useEffect(() => {\n    getPeople();\n  }, []);\n\n  if (query) {\n    const searchQuery = query.trim().toLowerCase();\n\n    visiblePeople = people.filter(\n      person => (person.name + person.mother + person.father).toLowerCase()\n        .includes(searchQuery)\n    );\n  }\n\n  const handleSortClick = (sortingTitle) => {\n    if (search.get('sortBy') !== sortingTitle) {\n      search.set('sortBy', sortingTitle);\n      search.set('sortOrder', 'asc');\n    } else {\n      search.set('sortOrder',\n        search.get('sortOrder') === 'asc' ? 'desc' : 'asc');\n    }\n\n    history.push({ search: search.toString() });\n  };\n\n  const getSortedPeople = (listOfPeople, field, type) => {\n    let peopleCopy = [...listOfPeople];\n\n    switch (type) {\n      case 'string':\n        peopleCopy = peopleCopy\n          .map(person => ({\n            ...person,\n            [field]: person[field] || '',\n          }))\n          .sort((a, b) => a[field].localeCompare(b[field]));\n\n        return peopleCopy;\n\n      case 'number':\n        peopleCopy.sort((a, b) => a[field] - b[field]);\n\n        return peopleCopy;\n\n      default:\n        peopleCopy.sort();\n\n        return peopleCopy;\n    }\n  };\n\n  const setSortBy = (listOfPeople, field, sortOrder) => {\n    const fieldType = TABLE_HEADERS.find(header => header.code === field).type;\n\n    if (sortOrder === 'desc') {\n      return getSortedPeople(listOfPeople, field, fieldType).reverse();\n    }\n\n    return getSortedPeople(listOfPeople, field, fieldType);\n  };\n\n  visiblePeople = search.get('sortBy')\n    ? [...setSortBy([...visiblePeople],\n      search.get('sortBy'), search.get('sortOrder') || 'asc')]\n    : [...visiblePeople];\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"title\">\n        People table\n      </h1>\n      <section className=\"people\">\n        <DebounceInput\n          className=\"search\"\n          placeholder=\"Type to search...\"\n          type=\"search\"\n          debounceTimeout={500}\n          onChange={(e) => {\n            search.set('query', e.target.value);\n            history.push({ search: search.toString() });\n          }}\n        />\n        {people.length > 0\n          ? (\n            <PeopleTable\n              people={visiblePeople}\n              handleSortClick={handleSortClick}\n            />\n          )\n          : 'Loading...'\n        }\n        <div className=\"people__count\">\n          {`Rows in table: ${visiblePeople.length}`}\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default PeoplePage;\n","import React from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport './App.scss';\nimport PeoplePage from './PeoplePage';\n\nconst App = () => (\n  <>\n    <Link to=\"/people\">People</Link>\n    <Route path=\"/people/:person?\" component={PeoplePage} />\n  </>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>\n  , document.getElementById('root')\n);\n"],"sourceRoot":""}